{"ast":null,"code":"var _jsxFileName = \"/Applications/MAMP/htdocs/foris-react-redux/client/src/components/Header/Header.jsx\",\n    _s = $RefreshSig$();\n\nimport * as React from 'react';\nimport { AppBar, Toolbar, IconButton, Typography, MenuItem, Grow, Popper, ClickAwayListener, Paper, MenuList, List, ListItem, ListItemText, TextField, Button } from '@material-ui/core/';\nimport { connectSearchBox, connectHits } from 'react-instantsearch-dom';\nimport { useMutation } from 'react-query';\nimport { AuthContext } from '../../AuthContext';\nimport SearchIcon from \"@material-ui/icons/esm/Search\";\nimport AccountCircle from \"@material-ui/icons/esm/AccountCircle\";\nimport { Link } from 'react-router-dom';\nimport useStyles from './styles.js';\nimport { signOut } from '../../hooks/useAuth';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Header = () => {\n  _s();\n\n  const c = useStyles();\n  const anchorRef = React.useRef(null);\n  const [open, setOpen] = React.useState(false);\n  const [hitsOpen, setHitsOpen] = React.useState(false);\n  const {\n    user,\n    setUser\n  } = React.useContext(AuthContext);\n  const useSignOutOnClick = useMutation(signOut, {\n    onSuccess: data => {\n      setUser('');\n    }\n  });\n\n  const handleToggle = () => {\n    setOpen(prevOpen => !prevOpen);\n  };\n\n  const handleClose = event => {\n    if (anchorRef.current && anchorRef.current.contains(event.target)) {\n      return;\n    }\n\n    setOpen(false);\n  };\n\n  function handleListKeyDown(event) {\n    if (event.key === 'Tab') {\n      event.preventDefault();\n      setOpen(false);\n    }\n  }\n\n  const SearchBox = ({\n    currentRefinement,\n    refine\n  }) => {\n    return /*#__PURE__*/_jsxDEV(ClickAwayListener, {\n      onClickAway: () => setHitsOpen(false),\n      children: /*#__PURE__*/_jsxDEV(TextField, {\n        className: c.searchInputBase,\n        placeholder: \"\\u5927\\u5B66\\u540D\\u3067\\u691C\\u7D22\\u3059\\u308B...\",\n        variant: \"outlined\",\n        type: \"search\",\n        value: currentRefinement,\n        onFocus: () => {\n          setHitsOpen(true);\n        },\n        onChange: event => refine(event.currentTarget.value),\n        InputProps: {\n          endAdornment: /*#__PURE__*/_jsxDEV(IconButton, {\n            type: \"submit\",\n            className: c.searchIcon,\n            \"aria-label\": \"search\",\n            children: /*#__PURE__*/_jsxDEV(SearchIcon, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 79,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 15\n          }, this)\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }, this);\n  };\n\n  const CustomSearchBox = connectSearchBox(SearchBox);\n\n  const Hits = ({\n    hits\n  }) => {\n    return /*#__PURE__*/_jsxDEV(Paper, {\n      children: /*#__PURE__*/_jsxDEV(List, {\n        component: \"nav\",\n        className: `c.hitsList ${hitsOpen ? c.hitsOpen : c.hitsClosed}`,\n        children: hits.length ? hits.length > 5 ? hits.slice(0, 6).map((hit, index) => index === 5 ? /*#__PURE__*/_jsxDEV(ListItem, {\n          button: true,\n          component: \"a\",\n          className: c.hitItem,\n          href: \"/schools\",\n          children: /*#__PURE__*/_jsxDEV(ListItemText, {\n            children: \"\\u3082\\u3063\\u3068\\u898B\\u308B\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 106,\n            columnNumber: 21\n          }, this)\n        }, \"000000\", false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 19\n        }, this) : /*#__PURE__*/_jsxDEV(ListItem, {\n          button: true,\n          component: \"a\",\n          className: c.hitItem,\n          href: `/schools/${hit.institutionData.url}`,\n          children: /*#__PURE__*/_jsxDEV(ListItemText, {\n            children: hit.name_en\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 115,\n            columnNumber: 21\n          }, this)\n        }, hit.opeid, false, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 19\n        }, this)) : hits.slice(0, 5).map(hit => /*#__PURE__*/_jsxDEV(ListItem, {\n          button: true,\n          component: \"a\",\n          className: c.hitItem,\n          href: `schools/${hit.institutionData.url}`,\n          children: /*#__PURE__*/_jsxDEV(ListItemText, {\n            children: hit.name_en\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 127,\n            columnNumber: 19\n          }, this)\n        }, hit.opeid, false, {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 17\n        }, this)) : /*#__PURE__*/_jsxDEV(ListItem, {\n          children: /*#__PURE__*/_jsxDEV(ListItemText, {\n            children: \"\\u6761\\u4EF6\\u306B\\u5408\\u3046\\u5927\\u5B66\\u304C\\u898B\\u3064\\u304B\\u308A\\u307E\\u305B\\u3093\\u3002\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 133,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 7\n    }, this);\n  };\n\n  const CustomHits = connectHits(Hits);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: c.grow,\n    id: \"back-to-top-anchor\",\n    children: /*#__PURE__*/_jsxDEV(AppBar, {\n      position: \"static\",\n      className: c.headerRoot,\n      children: /*#__PURE__*/_jsxDEV(Toolbar, {\n        className: c.toolbarRoot,\n        children: [/*#__PURE__*/_jsxDEV(Typography, {\n          className: c.title,\n          variant: \"h6\",\n          noWrap: true,\n          children: /*#__PURE__*/_jsxDEV(\"a\", {\n            href: \"/schools\",\n            className: c.titleLink,\n            children: \"FORIS\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 147,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: c.grow\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: c.algoliaContainer,\n          children: [/*#__PURE__*/_jsxDEV(CustomSearchBox, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 153,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: c.hitsContainer,\n            children: /*#__PURE__*/_jsxDEV(CustomHits, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 155,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 154,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: c.profileMenu,\n          children: user ? /*#__PURE__*/_jsxDEV(React.Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(IconButton, {\n              edge: \"end\",\n              \"aria-label\": \"account of current user\",\n              color: \"black\",\n              ref: anchorRef,\n              \"aria-controls\": open ? 'menu-list-grow' : undefined,\n              \"aria-haspopup\": \"true\",\n              onClick: handleToggle,\n              children: /*#__PURE__*/_jsxDEV(AccountCircle, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 169,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 161,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Popper, {\n              open: open,\n              anchorEl: anchorRef.current,\n              role: undefined,\n              transition: true,\n              disablePortal: true,\n              children: ({\n                TransitionProps,\n                placement\n              }) => /*#__PURE__*/_jsxDEV(Grow, { ...TransitionProps,\n                style: {\n                  transformOrigin: placement === 'bottom' ? 'center top' : 'center bottom'\n                },\n                children: /*#__PURE__*/_jsxDEV(Paper, {\n                  children: /*#__PURE__*/_jsxDEV(ClickAwayListener, {\n                    onClickAway: handleClose,\n                    children: /*#__PURE__*/_jsxDEV(MenuList, {\n                      autoFocusItem: open,\n                      id: \"menu-list-grow\",\n                      onKeyDown: handleListKeyDown,\n                      children: [/*#__PURE__*/_jsxDEV(MenuItem, {\n                        className: c.profileMenuItem,\n                        onClick: () => handleClose(),\n                        children: /*#__PURE__*/_jsxDEV(Typography, {\n                          variant: \"body2\",\n                          children: /*#__PURE__*/_jsxDEV(Link, {\n                            to: \"/mypage\",\n                            className: c.menuItemLink,\n                            children: \"\\u30D7\\u30ED\\u30D5\\u30A3\\u30FC\\u30EB\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 196,\n                            columnNumber: 33\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 195,\n                          columnNumber: 31\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 192,\n                        columnNumber: 29\n                      }, this), /*#__PURE__*/_jsxDEV(MenuItem, {\n                        className: c.profileMenuItem,\n                        onClick: () => useSignOutOnClick.mutate(),\n                        children: /*#__PURE__*/_jsxDEV(Typography, {\n                          variant: \"body2\",\n                          children: \"\\u30ED\\u30B0\\u30A2\\u30A6\\u30C8\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 204,\n                          columnNumber: 31\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 201,\n                        columnNumber: 29\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 188,\n                      columnNumber: 27\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 187,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 186,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 178,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 171,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 160,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            className: c.buttonsContainer,\n            children: [/*#__PURE__*/_jsxDEV(Button, {\n              variant: \"outlined\",\n              color: \"primary\",\n              children: \"\\u30ED\\u30B0\\u30A4\\u30F3\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 217,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              color: \"primary\",\n              children: \"\\u65B0\\u898F\\u767B\\u9332\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 220,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 216,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 158,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 143,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Header, \"sl+340Vzm5lbAH2CDMZftSjO3F8=\", false, function () {\n  return [useStyles, useMutation];\n});\n\n_c = Header;\nexport default Header;\n\nvar _c;\n\n$RefreshReg$(_c, \"Header\");","map":{"version":3,"sources":["/Applications/MAMP/htdocs/foris-react-redux/client/src/components/Header/Header.jsx"],"names":["React","AppBar","Toolbar","IconButton","Typography","MenuItem","Grow","Popper","ClickAwayListener","Paper","MenuList","List","ListItem","ListItemText","TextField","Button","connectSearchBox","connectHits","useMutation","AuthContext","Link","useStyles","signOut","Header","c","anchorRef","useRef","open","setOpen","useState","hitsOpen","setHitsOpen","user","setUser","useContext","useSignOutOnClick","onSuccess","data","handleToggle","prevOpen","handleClose","event","current","contains","target","handleListKeyDown","key","preventDefault","SearchBox","currentRefinement","refine","searchInputBase","currentTarget","value","endAdornment","searchIcon","CustomSearchBox","Hits","hits","hitsClosed","length","slice","map","hit","index","hitItem","institutionData","url","name_en","opeid","CustomHits","grow","headerRoot","toolbarRoot","title","titleLink","algoliaContainer","hitsContainer","profileMenu","undefined","TransitionProps","placement","transformOrigin","profileMenuItem","menuItemLink","mutate","buttonsContainer"],"mappings":"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","sourcesContent":["// @flow\nimport * as React from 'react'\nimport {\n  AppBar,\n  Toolbar,\n  IconButton,\n  Typography,\n  MenuItem,\n  Grow,\n  Popper,\n  ClickAwayListener,\n  Paper,\n  MenuList,\n  List,\n  ListItem,\n  ListItemText,\n  TextField,\n  Button,\n} from '@material-ui/core/'\nimport { connectSearchBox, connectHits } from 'react-instantsearch-dom'\nimport { useMutation } from 'react-query'\nimport { AuthContext } from '../../AuthContext'\n\nimport { Search as SearchIcon, AccountCircle } from '@material-ui/icons'\nimport { Link } from 'react-router-dom'\nimport useStyles from './styles.js'\nimport { signOut } from '../../hooks/useAuth'\n\nconst Header = (): React.Element<any> => {\n  const c = useStyles()\n  const anchorRef = React.useRef(null)\n  const [open, setOpen] = React.useState(false)\n  const [hitsOpen, setHitsOpen] = React.useState(false)\n  const { user, setUser } = React.useContext(AuthContext)\n\n  const useSignOutOnClick = useMutation(signOut, {\n    onSuccess: data => {\n      setUser('')\n    },\n  })\n\n  const handleToggle = () => {\n    setOpen(prevOpen => !prevOpen)\n  }\n\n  const handleClose = event => {\n    if (anchorRef.current && anchorRef.current.contains(event.target)) {\n      return\n    }\n    setOpen(false)\n  }\n\n  function handleListKeyDown(event) {\n    if (event.key === 'Tab') {\n      event.preventDefault()\n      setOpen(false)\n    }\n  }\n\n  const SearchBox = ({ currentRefinement, refine }) => {\n    return (\n      <ClickAwayListener onClickAway={() => setHitsOpen(false)}>\n        <TextField\n          className={c.searchInputBase}\n          placeholder=\"大学名で検索する...\"\n          variant=\"outlined\"\n          type=\"search\"\n          value={currentRefinement}\n          onFocus={() => {\n            setHitsOpen(true)\n          }}\n          onChange={event => refine(event.currentTarget.value)}\n          InputProps={{\n            endAdornment: (\n              <IconButton\n                type=\"submit\"\n                className={c.searchIcon}\n                aria-label=\"search\">\n                <SearchIcon />\n              </IconButton>\n            ),\n          }}\n        />\n      </ClickAwayListener>\n    )\n  }\n\n  const CustomSearchBox = connectSearchBox(SearchBox)\n\n  const Hits = ({ hits }) => {\n    return (\n      <Paper>\n        <List\n          component=\"nav\"\n          className={`c.hitsList ${hitsOpen ? c.hitsOpen : c.hitsClosed}`}>\n          {hits.length ? (\n            hits.length > 5 ? (\n              hits.slice(0, 6).map((hit, index) =>\n                index === 5 ? (\n                  <ListItem\n                    key=\"000000\"\n                    button\n                    component=\"a\"\n                    className={c.hitItem}\n                    href=\"/schools\">\n                    <ListItemText>もっと見る</ListItemText>\n                  </ListItem>\n                ) : (\n                  <ListItem\n                    key={hit.opeid}\n                    button\n                    component=\"a\"\n                    className={c.hitItem}\n                    href={`/schools/${hit.institutionData.url}`}>\n                    <ListItemText>{hit.name_en}</ListItemText>\n                  </ListItem>\n                )\n              )\n            ) : (\n              hits.slice(0, 5).map(hit => (\n                <ListItem\n                  key={hit.opeid}\n                  button\n                  component=\"a\"\n                  className={c.hitItem}\n                  href={`schools/${hit.institutionData.url}`}>\n                  <ListItemText>{hit.name_en}</ListItemText>\n                </ListItem>\n              ))\n            )\n          ) : (\n            <ListItem>\n              <ListItemText>条件に合う大学が見つかりません。</ListItemText>\n            </ListItem>\n          )}\n        </List>\n      </Paper>\n    )\n  }\n\n  const CustomHits = connectHits(Hits)\n  return (\n    <div className={c.grow} id=\"back-to-top-anchor\">\n      <AppBar position=\"static\" className={c.headerRoot}>\n        <Toolbar className={c.toolbarRoot}>\n          <Typography className={c.title} variant=\"h6\" noWrap>\n            <a href=\"/schools\" className={c.titleLink}>\n              FORIS\n            </a>\n          </Typography>\n          <div className={c.grow} />\n          <div className={c.algoliaContainer}>\n            <CustomSearchBox />\n            <div className={c.hitsContainer}>\n              <CustomHits />\n            </div>\n          </div>\n          <div className={c.profileMenu}>\n            {user ? (\n              <React.Fragment>\n                <IconButton\n                  edge=\"end\"\n                  aria-label=\"account of current user\"\n                  color=\"black\"\n                  ref={anchorRef}\n                  aria-controls={open ? 'menu-list-grow' : undefined}\n                  aria-haspopup=\"true\"\n                  onClick={handleToggle}>\n                  <AccountCircle />\n                </IconButton>\n                <Popper\n                  open={open}\n                  anchorEl={anchorRef.current}\n                  role={undefined}\n                  transition\n                  disablePortal>\n                  {({ TransitionProps, placement }) => (\n                    <Grow\n                      {...TransitionProps}\n                      style={{\n                        transformOrigin:\n                          placement === 'bottom'\n                            ? 'center top'\n                            : 'center bottom',\n                      }}>\n                      <Paper>\n                        <ClickAwayListener onClickAway={handleClose}>\n                          <MenuList\n                            autoFocusItem={open}\n                            id=\"menu-list-grow\"\n                            onKeyDown={handleListKeyDown}>\n                            <MenuItem\n                              className={c.profileMenuItem}\n                              onClick={() => handleClose()}>\n                              <Typography variant=\"body2\">\n                                <Link to=\"/mypage\" className={c.menuItemLink}>\n                                  プロフィール\n                                </Link>\n                              </Typography>\n                            </MenuItem>\n                            <MenuItem\n                              className={c.profileMenuItem}\n                              onClick={() => useSignOutOnClick.mutate()}>\n                              <Typography variant=\"body2\">\n                                ログアウト\n                              </Typography>\n                            </MenuItem>\n                          </MenuList>\n                        </ClickAwayListener>\n                      </Paper>\n                    </Grow>\n                  )}\n                </Popper>\n              </React.Fragment>\n            ) : (\n              <div className={c.buttonsContainer}>\n                <Button variant=\"outlined\" color=\"primary\">\n                  ログイン\n                </Button>\n                <Button color=\"primary\">新規登録</Button>\n              </div>\n            )}\n          </div>\n        </Toolbar>\n      </AppBar>\n    </div>\n  )\n}\n\nexport default Header\n"]},"metadata":{},"sourceType":"module"}