{"ast":null,"code":"var _jsxFileName = \"/Applications/MAMP/htdocs/foris-react-redux/client/src/components/Home/Home.jsx\",\n    _s = $RefreshSig$();\n\nimport * as React from 'react';\nimport clsx from 'clsx';\nimport useStyles from './styles';\nimport Fab from \"@material-ui/core/esm/Fab\";\nimport Typography from \"@material-ui/core/esm/Typography\";\nimport Container from \"@material-ui/core/esm/Container\";\nimport { Ripple } from 'react-spinners-css';\nimport Pagination from '@material-ui/lab/Pagination';\nimport KeyboardArrowUpIcon from '@material-ui/icons/KeyboardArrowUp';\nimport { Helmet } from 'react-helmet';\nimport { useQueryClient } from 'react-query';\nimport ScrollTop from '../Common/ScrollTop/ScrollTop.jsx';\nimport SchoolCardLarge from '../SchoolCards/SchoolCardLarge/SchoolCardLarge.jsx';\nimport FilterBox from './FilterBox/FilterBox';\nimport { DEFAULT_SAT_RANGE_LOW, DEFAULT_SAT_RANGE_HIGH, DEFAULT_TOEFL_RANGE, DEFAULT_TUITION_RANGE_HIGH, DEFAULT_TUITION_RANGE_LOW } from '../../util/final';\nimport { getSchools, useGetSchools } from '../../hooks/useSchools';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Home = props => {\n  _s();\n\n  const c = useStyles();\n  const queryClient = useQueryClient();\n  const [pageNumber, setPageNumber] = React.useState(1);\n  const [satRange, setSatRange] = React.useState([DEFAULT_SAT_RANGE_LOW || 600, DEFAULT_SAT_RANGE_HIGH || 1600]);\n  const [toeflRange, setToeflRange] = React.useState(DEFAULT_TOEFL_RANGE || 60);\n  const [tuitionRange, setTuitionRange] = React.useState([DEFAULT_TUITION_RANGE_LOW || 0, DEFAULT_TUITION_RANGE_HIGH || 600]);\n  const [stateLocation, setStateLocation] = React.useState('');\n  const [selectMajor, setSelectMajor] = React.useState('');\n  const [filterState, setFilterState] = React.useState({\n    fourYear: false,\n    twoYear: false,\n    publicSchool: false,\n    privateSchool: false,\n    communityCollege: false,\n    technicalCollege: false,\n    other: false,\n    liberalArtsCollege: false\n  });\n  const [searchCriteria, setSearchCriteria] = React.useState({\n    satRange,\n    toeflRange,\n    tuitionRange,\n    stateLocation,\n    selectMajor,\n    filterState\n  });\n  const {\n    status,\n    data,\n    isFetching\n  } = useGetSchools(pageNumber, searchCriteria);\n  React.useEffect(() => {\n    console.log(searchCriteria);\n\n    if (data === null || data === void 0 ? void 0 : data.hasMore) {\n      queryClient.prefetchQuery(['projects', pageNumber + 1], () => getSchools(pageNumber + 1));\n    }\n  }, [data, pageNumber, queryClient, searchCriteria]);\n\n  const handlePageChange = (e, num) => {\n    ;\n    (e.target.ownerDocument || document).querySelector('#back-to-top-anchor').scrollIntoView({\n      behavior: 'instant',\n      block: 'start'\n    });\n    setPageNumber(num);\n  };\n\n  const useSearchClick = () => {\n    setSearchCriteria({\n      satRange,\n      toeflRange,\n      tuitionRange,\n      stateLocation,\n      selectMajor,\n      filterState\n    });\n  };\n\n  const handleFilterChange = e => {\n    setFilterState({ ...filterState,\n      [e.target.name]: e.target.checked\n    });\n  };\n\n  const handleSatRange = (e, newValue) => {\n    setSatRange(newValue);\n  };\n\n  const handleToeflRange = (e, newValue) => {\n    setToeflRange(newValue);\n  };\n\n  const handleTuitionRange = (e, newValue) => {\n    setTuitionRange(newValue);\n  };\n\n  const handleStateLocationChange = e => {\n    setStateLocation(e.target.value);\n  };\n\n  const handleMajorChange = e => {\n    setSelectMajor(e.target.value);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: clsx(c.root, status === 'loading' && c.rootLoading),\n    children: [/*#__PURE__*/_jsxDEV(Helmet, {\n      children: [/*#__PURE__*/_jsxDEV(\"title\", {\n        children: \"\\u30A2\\u30E1\\u30EA\\u30AB\\u5927\\u5B66\\u3092\\u691C\\u7D22\\u3057\\u3088\\u3046\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"meta\", {\n        name: \"description\",\n        content: \"\\u30A2\\u30E1\\u30EA\\u30AB\\u5927\\u5B66\\u306E\\u30C7\\u30FC\\u30BF\\u30D9\\u30FC\\u30B9\\u3002\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: c.filterContainer,\n      children: /*#__PURE__*/_jsxDEV(FilterBox, {\n        states: {\n          satRange,\n          toeflRange,\n          tuitionRange,\n          stateLocation,\n          selectMajor,\n          filterState\n        },\n        handleFilterChange: handleFilterChange,\n        handleSatRange: handleSatRange,\n        handleToeflRange: handleToeflRange,\n        handleTuitionRange: handleTuitionRange,\n        handleStateLocationChange: handleStateLocationChange,\n        handleMajorChange: handleMajorChange,\n        handleSearchClick: useSearchClick\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Container, {\n      className: c.cardsContainer,\n      children: [status === 'loading' || isFetching ? /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginTop: 100,\n          display: 'flex',\n          flexDirection: 'column',\n          justifyContent: 'center',\n          alignItems: 'center'\n        },\n        children: [/*#__PURE__*/_jsxDEV(Typography, {\n          style: {\n            marginBottom: 20\n          },\n          children: \"\\u30ED\\u30FC\\u30C9\\u4E2D...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Ripple, {\n          color: \"#2196f3\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 11\n      }, this) : status === 'error' ? 'エラー発生' : data.totalSchoolsFound === 0 ? /*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"caption\",\n        style: {\n          textAlign: 'center',\n          marginTop: 20\n        },\n        children: \"\\u6761\\u4EF6\\u306B\\u3042\\u3063\\u305F\\u5B66\\u6821\\u306F\\u898B\\u3064\\u304B\\u308A\\u307E\\u305B\\u3093\\u3067\\u3057\\u305F\\u3002\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 11\n      }, this) : data.schools.map(school => /*#__PURE__*/_jsxDEV(SchoolCardLarge, {\n        school: school\n      }, school.unitid, false, {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 13\n      }, this)), status === 'success' && !isFetching && /*#__PURE__*/_jsxDEV(Pagination, {\n        count: Math.ceil(data.totalSchoolsFound / 8),\n        page: pageNumber,\n        className: c.pagination,\n        onChange: handlePageChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ScrollTop, { ...props,\n      children: /*#__PURE__*/_jsxDEV(Fab, {\n        \"aria-label\": \"key arrow up\",\n        className: c.fab,\n        children: /*#__PURE__*/_jsxDEV(KeyboardArrowUpIcon, {\n          className: c.fabIcon\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 174,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 112,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Home, \"JiPAF7Lzgak2Ko6Kx2zd10qbI8Q=\", false, function () {\n  return [useStyles, useQueryClient, useGetSchools];\n});\n\n_c = Home;\nexport default Home;\n\nvar _c;\n\n$RefreshReg$(_c, \"Home\");","map":{"version":3,"sources":["/Applications/MAMP/htdocs/foris-react-redux/client/src/components/Home/Home.jsx"],"names":["React","clsx","useStyles","Ripple","Pagination","KeyboardArrowUpIcon","Helmet","useQueryClient","ScrollTop","SchoolCardLarge","FilterBox","DEFAULT_SAT_RANGE_LOW","DEFAULT_SAT_RANGE_HIGH","DEFAULT_TOEFL_RANGE","DEFAULT_TUITION_RANGE_HIGH","DEFAULT_TUITION_RANGE_LOW","getSchools","useGetSchools","Home","props","c","queryClient","pageNumber","setPageNumber","useState","satRange","setSatRange","toeflRange","setToeflRange","tuitionRange","setTuitionRange","stateLocation","setStateLocation","selectMajor","setSelectMajor","filterState","setFilterState","fourYear","twoYear","publicSchool","privateSchool","communityCollege","technicalCollege","other","liberalArtsCollege","searchCriteria","setSearchCriteria","status","data","isFetching","useEffect","console","log","hasMore","prefetchQuery","handlePageChange","e","num","target","ownerDocument","document","querySelector","scrollIntoView","behavior","block","useSearchClick","handleFilterChange","name","checked","handleSatRange","newValue","handleToeflRange","handleTuitionRange","handleStateLocationChange","value","handleMajorChange","root","rootLoading","filterContainer","cardsContainer","marginTop","display","flexDirection","justifyContent","alignItems","marginBottom","totalSchoolsFound","textAlign","schools","map","school","unitid","Math","ceil","pagination","fab","fabIcon"],"mappings":"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","sourcesContent":["// @flow\nimport * as React from 'react'\nimport clsx from 'clsx'\nimport useStyles from './styles'\nimport { Fab, Typography, Container } from '@material-ui/core'\nimport { Ripple } from 'react-spinners-css'\nimport Pagination from '@material-ui/lab/Pagination'\nimport KeyboardArrowUpIcon from '@material-ui/icons/KeyboardArrowUp'\nimport { Helmet } from 'react-helmet'\nimport { useQueryClient } from 'react-query'\n\nimport ScrollTop from '../Common/ScrollTop/ScrollTop.jsx'\nimport SchoolCardLarge from '../SchoolCards/SchoolCardLarge/SchoolCardLarge.jsx'\nimport FilterBox from './FilterBox/FilterBox'\nimport {\n  DEFAULT_SAT_RANGE_LOW,\n  DEFAULT_SAT_RANGE_HIGH,\n  DEFAULT_TOEFL_RANGE,\n  DEFAULT_TUITION_RANGE_HIGH,\n  DEFAULT_TUITION_RANGE_LOW,\n} from '../../util/final'\nimport { getSchools, useGetSchools } from '../../hooks/useSchools'\n\nconst Home = (props: any): React.Element<any> => {\n  const c = useStyles()\n  const queryClient = useQueryClient()\n  const [pageNumber, setPageNumber] = React.useState(1)\n  const [satRange, setSatRange] = React.useState([\n    DEFAULT_SAT_RANGE_LOW || 600,\n    DEFAULT_SAT_RANGE_HIGH || 1600,\n  ])\n  const [toeflRange, setToeflRange] = React.useState(DEFAULT_TOEFL_RANGE || 60)\n  const [tuitionRange, setTuitionRange] = React.useState([\n    DEFAULT_TUITION_RANGE_LOW || 0,\n    DEFAULT_TUITION_RANGE_HIGH || 600,\n  ])\n  const [stateLocation, setStateLocation] = React.useState('')\n  const [selectMajor, setSelectMajor] = React.useState('')\n  const [filterState, setFilterState] = React.useState({\n    fourYear: false,\n    twoYear: false,\n    publicSchool: false,\n    privateSchool: false,\n    communityCollege: false,\n    technicalCollege: false,\n    other: false,\n    liberalArtsCollege: false,\n  })\n  const [searchCriteria, setSearchCriteria] = React.useState({\n    satRange,\n    toeflRange,\n    tuitionRange,\n    stateLocation,\n    selectMajor,\n    filterState,\n  })\n\n  const { status, data, isFetching } = useGetSchools(pageNumber, searchCriteria)\n\n  React.useEffect(() => {\n    console.log(searchCriteria)\n    if (data?.hasMore) {\n      queryClient.prefetchQuery(['projects', pageNumber + 1], () =>\n        getSchools(pageNumber + 1)\n      )\n    }\n  }, [data, pageNumber, queryClient, searchCriteria])\n\n  const handlePageChange = (e, num) => {\n    ;(e.target.ownerDocument || document)\n      .querySelector('#back-to-top-anchor')\n      .scrollIntoView({ behavior: 'instant', block: 'start' })\n    setPageNumber(num)\n  }\n\n  const useSearchClick = () => {\n    setSearchCriteria({\n      satRange,\n      toeflRange,\n      tuitionRange,\n      stateLocation,\n      selectMajor,\n      filterState,\n    })\n  }\n\n  const handleFilterChange = e => {\n    setFilterState({ ...filterState, [e.target.name]: e.target.checked })\n  }\n\n  const handleSatRange = (e, newValue) => {\n    setSatRange(newValue)\n  }\n\n  const handleToeflRange = (e, newValue) => {\n    setToeflRange(newValue)\n  }\n\n  const handleTuitionRange = (e, newValue) => {\n    setTuitionRange(newValue)\n  }\n\n  const handleStateLocationChange = e => {\n    setStateLocation(e.target.value)\n  }\n\n  const handleMajorChange = e => {\n    setSelectMajor(e.target.value)\n  }\n\n  return (\n    <div className={clsx(c.root, status === 'loading' && c.rootLoading)}>\n      <Helmet>\n        <title>アメリカ大学を検索しよう</title>\n        <meta name=\"description\" content=\"アメリカ大学のデータベース。\" />\n      </Helmet>\n      <div className={c.filterContainer}>\n        <FilterBox\n          states={{\n            satRange,\n            toeflRange,\n            tuitionRange,\n            stateLocation,\n            selectMajor,\n            filterState,\n          }}\n          handleFilterChange={handleFilterChange}\n          handleSatRange={handleSatRange}\n          handleToeflRange={handleToeflRange}\n          handleTuitionRange={handleTuitionRange}\n          handleStateLocationChange={handleStateLocationChange}\n          handleMajorChange={handleMajorChange}\n          handleSearchClick={useSearchClick}\n        />\n      </div>\n      <Container className={c.cardsContainer}>\n        {/** TODO: add chips for different university rankings and lists */}\n        {status === 'loading' || isFetching ? (\n          <div\n            style={{\n              marginTop: 100,\n              display: 'flex',\n              flexDirection: 'column',\n              justifyContent: 'center',\n              alignItems: 'center',\n            }}>\n            <Typography style={{ marginBottom: 20 }}>ロード中...</Typography>\n            <Ripple color=\"#2196f3\" />\n          </div>\n        ) : status === 'error' ? (\n          'エラー発生'\n        ) : data.totalSchoolsFound === 0 ? (\n          <Typography\n            variant=\"caption\"\n            style={{ textAlign: 'center', marginTop: 20 }}>\n            条件にあった学校は見つかりませんでした。\n          </Typography>\n        ) : (\n          data.schools.map(school => (\n            <SchoolCardLarge key={school.unitid} school={school} />\n          ))\n        )}\n        {status === 'success' && !isFetching && (\n          <Pagination\n            count={Math.ceil(data.totalSchoolsFound / 8)}\n            page={pageNumber}\n            className={c.pagination}\n            onChange={handlePageChange}\n          />\n        )}\n      </Container>\n      <ScrollTop {...props}>\n        <Fab aria-label=\"key arrow up\" className={c.fab}>\n          <KeyboardArrowUpIcon className={c.fabIcon} />\n        </Fab>\n      </ScrollTop>\n    </div>\n  )\n}\nexport default Home\n"]},"metadata":{},"sourceType":"module"}