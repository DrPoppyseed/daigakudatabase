{"ast":null,"code":"var _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport { useQuery } from 'react-query';\nimport axios from 'axios';\nimport { firebaseAuth } from '../util/firebase';\nimport { DEFAULT_SAT_RANGE_LOW, DEFAULT_SAT_RANGE_HIGH, DEFAULT_TOEFL_RANGE, DEFAULT_TUITION_RANGE_HIGH, DEFAULT_TUITION_RANGE_LOW } from '../util/final';\nconst _INITIAL_SEARCH_STATE = {\n  satRange: [DEFAULT_SAT_RANGE_LOW, DEFAULT_SAT_RANGE_HIGH],\n  toeflRange: DEFAULT_TOEFL_RANGE,\n  tuitionRange: [DEFAULT_TUITION_RANGE_LOW, DEFAULT_TUITION_RANGE_HIGH],\n  stateLocation: '',\n  selectMajor: '',\n  filterState: {}\n};\nexport const getSchools = async (pageNumber = 1, searchCriteria) => {\n  /** TODO: refactor if statements and make function readable and compact */\n  const {\n    satRange,\n    toeflRange,\n    tuitionRange,\n    stateLocation,\n    selectMajor,\n    filterState\n  } = searchCriteria;\n  let params = '';\n\n  for (const [key, value] of Object.entries(filterState)) {\n    if (value) params += `${key}=${value}&`;\n  }\n\n  if (satRange[0] !== DEFAULT_SAT_RANGE_LOW || satRange[1] !== DEFAULT_SAT_RANGE_HIGH) {\n    params += `sat=${satRange[0]},${satRange[1]}&`;\n  }\n\n  if (tuitionRange[0] !== DEFAULT_TUITION_RANGE_LOW || tuitionRange[1] !== DEFAULT_TUITION_RANGE_HIGH) {\n    params += `tuition=${satRange[0]},${satRange[1]}&`;\n  }\n\n  if (toeflRange !== DEFAULT_TOEFL_RANGE) {\n    params += `toefl=${toeflRange}&`;\n  }\n\n  if (tuitionRange[0] !== DEFAULT_TUITION_RANGE_LOW || tuitionRange[1] !== DEFAULT_TUITION_RANGE_HIGH) {\n    params += `tuition=${tuitionRange[0]},${tuitionRange[1]}&`;\n  }\n\n  if (stateLocation) {\n    params += `state=${stateLocation}&`;\n  }\n\n  if (selectMajor) {\n    params += `major=${selectMajor}&`;\n  }\n\n  if (params) {\n    params = '?' + params.slice(0, params.length - 1);\n  }\n\n  try {\n    const user = await firebaseAuth.currentUser;\n\n    if (!!user) {\n      const token = await user.getIdToken(true);\n      const {\n        data\n      } = await axios.get(`http://localhost:3080/api/v1/schools/?page=${pageNumber}&${params}`, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      return data;\n    } else {\n      const {\n        data\n      } = await axios.get(`http://localhost:3080/api/v1/schools/?page=${pageNumber}&${params}`, {\n        headers: {\n          Authorization: `Bearer`\n        }\n      });\n      return data;\n    }\n  } catch (err) {\n    console.log('ðŸš€ ~ file: useSchools.js ~ getSchools() try-catch ~ err', err);\n  }\n};\nexport const useGetSchools = (pageNumber = 1, searchCriteria = _INITIAL_SEARCH_STATE) => {\n  _s();\n\n  return useQuery(['schools', pageNumber, searchCriteria], () => getSchools(pageNumber, searchCriteria), {\n    keepPreviousData: true\n  });\n};\n\n_s(useGetSchools, \"4ZpngI1uv+Uo3WQHEZmTQ5FNM+k=\", false, function () {\n  return [useQuery];\n});\n\nconst getSchoolById = async id => {\n  try {\n    const user = await firebaseAuth.currentUser;\n\n    if (!!user) {\n      const token = await user.getIdToken(true);\n      const {\n        data\n      } = await axios.get(`http://localhost:3080/api/v1/schools/${id}`, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      return data.schoolReport[0];\n    } else {\n      const {\n        data\n      } = await axios.get(`http://localhost:3080/api/v1/schools/${id}`, {\n        headers: {\n          Authorization: `Bearer null`\n        }\n      });\n      return data.schoolReport[0];\n    }\n  } catch (err) {\n    console.log('ðŸš€ ~ file: useSchools.js ~ getSchools() try-catch ~ err', err);\n  }\n};\n\nexport const useGetSchoolById = schoolId => {\n  _s2();\n\n  return useQuery(['schoolPage', schoolId], () => getSchoolById(schoolId), {\n    enabled: !!schoolId\n  });\n};\n\n_s2(useGetSchoolById, \"4ZpngI1uv+Uo3WQHEZmTQ5FNM+k=\", false, function () {\n  return [useQuery];\n});","map":{"version":3,"sources":["/Applications/MAMP/htdocs/foris-react-redux/client/src/hooks/useSchools.js"],"names":["useQuery","axios","firebaseAuth","DEFAULT_SAT_RANGE_LOW","DEFAULT_SAT_RANGE_HIGH","DEFAULT_TOEFL_RANGE","DEFAULT_TUITION_RANGE_HIGH","DEFAULT_TUITION_RANGE_LOW","_INITIAL_SEARCH_STATE","satRange","toeflRange","tuitionRange","stateLocation","selectMajor","filterState","getSchools","pageNumber","searchCriteria","params","key","value","Object","entries","slice","length","user","currentUser","token","getIdToken","data","get","headers","Authorization","err","console","log","useGetSchools","keepPreviousData","getSchoolById","id","schoolReport","useGetSchoolById","schoolId","enabled"],"mappings":"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","sourcesContent":["// @flow\nimport { useQuery } from 'react-query'\nimport axios from 'axios'\nimport { firebaseAuth } from '../util/firebase'\nimport {\n  DEFAULT_SAT_RANGE_LOW,\n  DEFAULT_SAT_RANGE_HIGH,\n  DEFAULT_TOEFL_RANGE,\n  DEFAULT_TUITION_RANGE_HIGH,\n  DEFAULT_TUITION_RANGE_LOW,\n} from '../util/final'\n\nconst _INITIAL_SEARCH_STATE = {\n  satRange: [DEFAULT_SAT_RANGE_LOW, DEFAULT_SAT_RANGE_HIGH],\n  toeflRange: DEFAULT_TOEFL_RANGE,\n  tuitionRange: [DEFAULT_TUITION_RANGE_LOW, DEFAULT_TUITION_RANGE_HIGH],\n  stateLocation: '',\n  selectMajor: '',\n  filterState: {},\n}\n\nexport const getSchools = async (\n  pageNumber: number = 1,\n  searchCriteria: Object\n): any => {\n  /** TODO: refactor if statements and make function readable and compact */\n  const {\n    satRange,\n    toeflRange,\n    tuitionRange,\n    stateLocation,\n    selectMajor,\n    filterState,\n  } = searchCriteria\n  let params = ''\n\n  for (const [key, value] of Object.entries(filterState)) {\n    if (value) params += `${key}=${value}&`\n  }\n\n  if (\n    satRange[0] !== DEFAULT_SAT_RANGE_LOW ||\n    satRange[1] !== DEFAULT_SAT_RANGE_HIGH\n  ) {\n    params += `sat=${satRange[0]},${satRange[1]}&`\n  }\n  if (\n    tuitionRange[0] !== DEFAULT_TUITION_RANGE_LOW ||\n    tuitionRange[1] !== DEFAULT_TUITION_RANGE_HIGH\n  ) {\n    params += `tuition=${satRange[0]},${satRange[1]}&`\n  }\n  if (toeflRange !== DEFAULT_TOEFL_RANGE) {\n    params += `toefl=${toeflRange}&`\n  }\n  if (\n    tuitionRange[0] !== DEFAULT_TUITION_RANGE_LOW ||\n    tuitionRange[1] !== DEFAULT_TUITION_RANGE_HIGH\n  ) {\n    params += `tuition=${tuitionRange[0]},${tuitionRange[1]}&`\n  }\n  if (stateLocation) {\n    params += `state=${stateLocation}&`\n  }\n  if (selectMajor) {\n    params += `major=${selectMajor}&`\n  }\n\n  if (params) {\n    params = '?' + params.slice(0, params.length - 1)\n  }\n\n  try {\n    const user = await firebaseAuth.currentUser\n    if (!!user) {\n      const token = await user.getIdToken(true)\n      const { data } = await axios.get(\n        `http://localhost:3080/api/v1/schools/?page=${pageNumber}&${params}`,\n        {\n          headers: { Authorization: `Bearer ${token}` },\n        }\n      )\n      return data\n    } else {\n      const { data } = await axios.get(\n        `http://localhost:3080/api/v1/schools/?page=${pageNumber}&${params}`,\n        {\n          headers: { Authorization: `Bearer` },\n        }\n      )\n      return data\n    }\n  } catch (err) {\n    console.log('ðŸš€ ~ file: useSchools.js ~ getSchools() try-catch ~ err', err)\n  }\n}\n\nexport const useGetSchools = (\n  pageNumber: number = 1,\n  searchCriteria: any = _INITIAL_SEARCH_STATE\n): any => {\n  return useQuery(\n    ['schools', pageNumber, searchCriteria],\n    () => getSchools(pageNumber, searchCriteria),\n    { keepPreviousData: true }\n  )\n}\n\nconst getSchoolById = async (id: any): any => {\n  try {\n    const user = await firebaseAuth.currentUser\n    if (!!user) {\n      const token = await user.getIdToken(true)\n      const { data } = await axios.get(\n        `http://localhost:3080/api/v1/schools/${id}`,\n        {\n          headers: { Authorization: `Bearer ${token}` },\n        }\n      )\n      return data.schoolReport[0]\n    } else {\n      const { data } = await axios.get(\n        `http://localhost:3080/api/v1/schools/${id}`,\n        {\n          headers: { Authorization: `Bearer null` },\n        }\n      )\n      return data.schoolReport[0]\n    }\n  } catch (err) {\n    console.log('ðŸš€ ~ file: useSchools.js ~ getSchools() try-catch ~ err', err)\n  }\n}\n\nexport const useGetSchoolById = (schoolId: any): any => {\n  return useQuery(['schoolPage', schoolId], () => getSchoolById(schoolId), {\n    enabled: !!schoolId,\n  })\n}\n"]},"metadata":{},"sourceType":"module"}